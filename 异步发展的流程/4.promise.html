<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    //1. 解决了回调地狱
    //2. promise 是立即执行的构造函数
    //3. promise.prototype.then() 返回的是一个新的promise可以直接采用链式写法
    //4. Promise.prototype.catch() 是当我们promise出错的时候来执行的函数
    //5. Promise.all([p1,p2,p3]) 方法用于将多个 Promise 实例，包装成一个新的 Promise 实例
    //    1) p1,p2,p3都是promise的实例，只要三个成功了才会执行成功的回调。
    //    2)其中有一个失败来就会返回失败的函数
    //    3)返回的顺序不会改变
    //6. Promise.race([p1,p2,p3]) 如果有一个成功来就会执行回调
    //7. Promise.resolve() 将对象转换为promise对象
    //1.promise--->解决回调地狱
    // $.ajax({
    //   url,
    //   success() {
    //     $.ajax({
    //       url,
    //       success() {

    //       }
    //     })
    //   }
    // })

    // function ajax(url) {
    //   return new Promise(function(reslove, reject) {
    //     $.ajax({
    //       url,
    //       success() {
    //         reslove()
    //       },
    //       faild() {
    //         reject()
    //       }
    //     })
    //   })
    // }
    // var a = ajax();
    // a.thne(function(val) {
    //   console.log(val)
    //   return ajax(url)
    // }, function(err) {
    //   console.log(err)
    // }).then(function() {
    //   console.log(val)
    // }, function(err) {
    //   console.log(err)
    // })

    //promise.all()

    function fn(time) {
      return new Promise(function(resolve,reject) {
        resolve(`${time/1000}秒后醒来`)
      })  
    }
    let p1 = fn(3000)
    let p2 = fn(2000)

    Promise.all([p1,p2]).then(function(arr){
      console.log(arr)
    })

  </script>
</body>

</html>